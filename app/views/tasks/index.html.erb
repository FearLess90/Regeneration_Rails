<script type="text/javascript">
	$(document).ready(function() {
		$("#ClientDetails").hide();
        $("#TasksDetails").hide();
	    $("#tb_clients").typeahead({
	        minLength: 1,
	        source: function(query, process) {
	        	objects = [];
        		map = {};
		        var $items = new Array;
        		$items = [""];
        		var data = <%= @clients.to_s.html_safe %>;
        		$.map(data, function(data){
                    var group;
                    group = {
                        id: data.id,
                        name: data.name,                            
                        toString: function () {
                            return JSON.stringify(this);
                        },
                        toLowerCase: function () {
                            return this.name.toLowerCase();
                        },
                        indexOf: function (string) {
                            return String.prototype.indexOf.apply(this.name, arguments);
                        },
                        replace: function (string) {
                            var value = '';
                            value +=  this.name;
                            if(typeof(this.level) != 'undefined') {
                                value += ' <span class="pull-right muted">';
                                value += this.level;
                                value += '</span>';
                            }
                            return String.prototype.replace.apply('<div>' + value + '</div>', arguments);
                        }
                    };
                    $items.push(group);
                });

                process($items);
	    		
	        },
	        matcher: function (item) {
			    if (item.toLowerCase().substring(0, this.query.trim().length) == this.query.toLowerCase().trim()) {
			        return true;
			    }
			},
			updater: function (item) {
			    $.ajax({
			            type: "POST",
			            url: "/clients/get_client.js?id=" + JSON.parse(item).id
		        });
			}
	    });
	});
</script>

<label for="tb_clients">Please enter the client last name:</label>
<input id="tb_clients" type="text" data-provide="typeahead" />

<div id="ClientDetails">

</div>

<div id="TasksDetails">

<a href="#new-task" role="button" class="btn btn-success" data-toggle="modal">Create a new Task</a>
<button class="btn btn-primary">View Current Tasks</button>
<button class="btn btn-warning">View Previous Tasks</button>

</div>

<div id="new-task" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3>New Task</h3>
  </div>
  <div class="modal-body">
    <div class="row-fluid">
        <div class="span5" style="border: 1px solid black">1</div>
        <div class="span5" style="border: 1px solid black">2</div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>